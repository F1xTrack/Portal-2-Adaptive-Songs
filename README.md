# Portal 2 Adaptive Songs

**Android-приложение для адаптивного воспроизведения саундтреков из Portal 2 в зависимости от скорости движения пользователя.**

---

## Добавлено в 1.3.1

- Тайм‑атака:
  - Новая сложность «Экстрим» (челленджи X1–X4), локализация RU/EN, пониженные веса выпадения.
  - Первая задача в каждой сессии — всегда «Ровный старт» (E2), но только когда это уместно по контексту.
  - В рамках одной сессии уже успешно выполненные задачи больше не повторяются.
  - Контекстная уместность: задания, требующие superspeed, не показываются, если вы ниже порога, и наоборот.
- UI тайм‑атаки: крупный заголовок испытания, тонкий прогресс‑бар со скруглением, плавная анимация обновления прогресса.
- Плеер: безопасный выбор вариантов трека; больше не предпринимаются попытки открытия отсутствующих `normal.wav`/`superspeed.wav` из assets (исключены ошибки вида `FileNotFoundException: /normal.wav`).
- Мелкие улучшения стабильности и UX.

---

## Основные возможности

- Адаптивное переключение между обычной и ускоренной версией трека по скорости пользователя
- Плавный кроссфейд между треками
- Бесшовное зацикливание музыки (loop)
- Рандомизация вариаций треков: автоматический выбор случайной версии `normal*`/`superspeed*`
- Поддержка треков без базовых файлов `normal.wav`/`superspeed.wav` (только вариации `normalN`/`superspeedN`)
- Корректное определение длительности по первой доступной вариации `normal*`
- Современный список треков: карточки с названием, длительностью, количеством прослушиваний; нажмите на текущий трек — пауза/возобновление
- Поиск по трекам: мгновенный фильтр по названию в общем списке
- Сортировка треков: по алфавиту, частоте использования, длительности
- Статистика: приложение автоматически считает, сколько раз каждый трек был прослушан
- История маршрутов: просмотр на карте OSM, выбор источника тайлов (например, MAPNIK, USGS), улучшенная визуальная консистентность
- Хранилище: импорт, удаление треков и очистка статистики
- Диалоги на Material 3 (Centered) с кастомным overlay (углы «cut», цвета и кнопки от активной темы)
- Импорт пользовательских саундтреков из ZIP-архивов (структура: normal.wav и superspeed.wav)
- Массовый импорт: можно импортировать сразу несколько треков из папки с ZIP-архивами
- Исправление рассинхрона: для каждого трека можно включить синхронизацию потоков
- Все основные настройки (импорт, рассинхрон) в отдельном меню
- Полная поддержка landscape-режима
- Автоматическая остановка музыки при смене ориентации или закрытии приложения
- Гибкая регулировка громкости: отдельные ползунки для обычного/ускоренного трека и интерфейсных звуков
- Интерфейсные звуки: настройка и мгновенное прослушивание при изменении параметров (speed/nospeed/on/off)
- Онбординг: первый запуск с выбором языка и скачиванием саундтреков с прогрессом
- Мультиязычность: локализации на 12 языков (ar, de, en, es, hi, ja, ko, pl, pt, ru, tr, zh)

---

## Как добавить треки в приложение

**Внимание!** С версии 1.1.1 встроенные саундтреки удалены из APK. Теперь вы можете скачать нужные треки отдельно с [страницы релиза на GitHub](https://github.com/F1xTrack/Portal-2-Adaptive-Songs/releases) и или скачать прямо в приложении.

### Импорт треков

Альтернатива: при первом запуске на экране онбординга нажмите «Скачать саундтреки» — архив будет загружен и распакован автоматически в память приложения.

1. Перейдите на страницу релиза и скачайте ZIP-архив треков (soundtracks.zip).
2. Распакуйте скачанный архив.
3. Откройте приложение, перейдите в меню настроек → Импортировать из папки.
4. Выберите папку, в которую распаковали архив (в ней будет ещё несколько архивов, их не трогайте).

**Требования к ZIP:**
- В архиве должны быть только два файла: `normal.wav` и `superspeed.wav` (без подпапок).
- Имя ZIP-архива станет названием трека в приложении.

---

## О приложении

- Версию приложения можно посмотреть в самом приложении: Меню → «О приложении».
- Репозиторий: https://github.com/F1xTrack/Portal-2-Adaptive-Songs
- Поддержать разработчика: https://www.donationalerts.com/r/portal2adaptivesongs

---

## Лицензия

MIT License. Используйте, изменяйте и распространяйте приложение свободно, при условии сохранения авторства.

---

## Контакты и обратная связь

- Вопросы и предложения: создавайте issue на GitHub
- Автор: F1xTrack

---
**Portal 2 Adaptive Songs** — сделайте свои прогулки и тренировки атмосферными!
